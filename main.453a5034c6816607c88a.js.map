{"version":3,"sources":["webpack:///./templates/imagesTemplate.hbs","webpack:///./js/pNotify.js","webpack:///./js/apiService.js","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","stackForNotify","Stack","dir1","firstpos1","spacing1","push","maxOpen","modal","positioned","context","document","body","onNotify","text","type","title","stack","delay","options","undefined","width","clientWidth","alert","ImagesQuery","this","searchQuery","page","fetchImages","searchParams","URLSearchParams","q","per_page","key","fetch","response","json","imageList","incrementPage","resetPage","newQuery","refs","searchForm","querySelector","scrollHelper","imagesQuery","onDataReceived","images","status","hits","totalHits","insertAdjacentHTML","imagesTemplate","message","fetchAndIncrementPage","then","clearGallery","innerHTML","query","focus","addEventListener","e","preventDefault","currentTarget","elements","value","IntersectionObserver","entries","forEach","entry","isIntersecting","rootMargin","observe"],"mappings":"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","file":"main.453a5034c6816607c88a.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-item\\\">\\n    <div class=\\\"photo-card\\\">\\n        <img class=\\\"photo-card__img\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":42},\"end\":{\"line\":4,\"column\":58}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":65},\"end\":{\"line\":4,\"column\":71}}}) : helper)))\n    + \"\\\" />\\n\\n        <div class=\\\"stats\\\">\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":16},\"end\":{\"line\":9,\"column\":25}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">visibility</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":25}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">comment</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":28}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":29}}}) : helper)))\n    + \"\\n            </p>\\n        </div>\\n    </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","import { alert, Stack } from '@pnotify/core';\n\nconst stackForNotify = new Stack({\n  dir1: 'up',\n  firstpos1: 0,\n  spacing1: 0,\n  push: 'bottom',\n  maxOpen: 1,\n  modal: false,\n  positioned: true,\n  context: document.body,\n});\n\nexport function onNotify(\n  text = 'Something went wrong',\n  type = 'error',\n  title = '',\n  stack,\n  delay = 2000,\n) {\n  const options = {\n    title,\n    text,\n    type,\n    stack: stack === undefined ? stackForNotify : new Stack(stack),\n    delay,\n    width: `${document.body.clientWidth}px`,\n  };\n  alert(options);\n}\n","const API_KEY = '19182122-b959857203510615d63e1aa25';\nconst BASE_URL =\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\n\nexport class ImagesQuery {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async fetchImages() {\n    const searchParams = new URLSearchParams({\n      q: this.searchQuery,\n      page: this.page,\n      per_page: 12,\n      key: API_KEY,\n    });\n    const response = await fetch(`${BASE_URL}${searchParams}`);\n    const imageList = await response.json();\n\n    return imageList;\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n  resetPage() {\n    this.page = 1;\n  }\n\n  // createImagesListMarkup(images, allImagesCount) {\n  //   this.render(imagesTemplate(images));\n  //   if (allImagesCount > 12) {\n  //     onNotify(\n  //       `We have found ${allImagesCount} images. Scroll to see all pictures.`,\n  //       'info',\n  //       'Info',\n  //     );\n  //   }\n  //   if (allImagesCount < 12) {\n  //     onNotify(`We have found ${allImagesCount} images.`, 'info', 'Info');\n  //   }\n  // }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import './styles.css';\nimport './styles/styles.scss';\nimport '@pnotify/bootstrap4/dist/PNotifyBootstrap4.css';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport '@pnotify/core/dist/Material.css';\nimport 'material-design-icons/iconfont/material-icons.css';\nimport * as basicLightbox from 'basiclightbox';\nimport imagesTemplate from './templates/imagesTemplate.hbs';\nimport { onNotify } from './js/pNotify.js';\n\nimport { ImagesQuery } from './js/apiService';\n\nconst refs = getRefs();\nconst imagesQuery = new ImagesQuery();\n\nfunction getRefs() {\n  return {\n    searchForm: document.querySelector('#search-form'),\n    imageList: document.querySelector('.gallery'),\n    scrollHelper: document.querySelector('#scroll-helper'),\n  };\n}\n\nrefs.searchForm.query.focus();\nrefs.searchForm.addEventListener('submit', onSearch);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  imagesQuery.query = e.currentTarget.elements.query.value;\n\n  if (imagesQuery.query === '') {\n    clearGallery();\n    onNotify(`Type something to find.`, 'error', 'Error');\n    return;\n  }\n\n  imagesQuery.resetPage();\n  clearGallery();\n  fetchAndIncrementPage();\n}\n\nfunction createImagesListMarkup(images, allImagesCount) {\n  refs.imageList.insertAdjacentHTML('beforeend', imagesTemplate(images));\n}\n\nfunction onDataReceived(data) {\n  if (data.status === 404) {\n    onNotify(`${data.message}`, 'error', data.status);\n    return;\n  }\n  createImagesListMarkup(data.hits, data.totalHits);\n}\n\nfunction fetchAndIncrementPage() {\n  imagesQuery.fetchImages().then(data => {\n    onDataReceived(data);\n    imagesQuery.incrementPage();\n  });\n}\n\nfunction clearGallery() {\n  refs.imageList.innerHTML = '';\n}\n\nconst onEntry = entries => {\n  entries.forEach(entry => {\n    if (entry.isIntersecting && imagesQuery.query !== '') {\n      fetchAndIncrementPage();\n    }\n  });\n};\n\nconst observer = new IntersectionObserver(onEntry, {\n  rootMargin: '150px',\n});\nobserver.observe(refs.scrollHelper);\n"],"sourceRoot":""}